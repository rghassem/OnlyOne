!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var o;n.r(t),n.d(t,"currentLevel",(function(){return me})),n.d(t,"maxLevel",(function(){return Le})),function(e){e[e.First=0]="First",e[e.Second=1]="Second",e[e.Third=2]="Third",e[e.O=3]="O",e[e.N=4]="N",e[e.E=5]="E",e[e.R=6]="R",e[e.L=7]="L",e[e.U=8]="U",e[e.D=9]="D",e[e.W=10]="W",e[e.I=11]="I",e[e.C=12]="C",e[e.X=13]="X",e[e.Y=14]="Y",e[e.B=15]="B",e[e.M=16]="M",e[e.Z=17]="Z",e[e.A=18]="A",e[e.K=19]="K",e[e.S=20]="S",e[e.P=21]="P",e[e.T=22]="T",e[e.G=23]="G",e[e.Length=24]="Length"}(o||(o={}));class r{constructor(e,t="",n="We didn't implement this one yet!",o="#ffffff"){this.char=e,this.name=t,this.description=n,this.color=o}}const i=new Map;function s(e,t,n,r){let i=100*e,s=0;for(let e of r.keys())if(s+=r.get(e),i<=s&&(e!==o.T||0!==t&&t!==a-1&&0!==n&&n!==l-1))return e;return o.I}i.set(o.First,new r("0","Get this to the bottom!","Get this to the bottom row!","#FFFF00")),i.set(o.Second,new r("1","Get this to the bottom!","Get this to the bottom row!","#FFFF00")),i.set(o.Third,new r("2","Get this to the bottom!","Get this to the bottom row!","#FFFF00")),i.set(o.R,new r("R","Right","Destroys all letters to the right. Blocked by walls.")),i.set(o.L,new r("L","Left","Destroys all letters to the left. Blocked by walls.")),i.set(o.U,new r("U","Up","Destroys all letters above it. Blocked by walls.")),i.set(o.D,new r("D","Down","Destroys all letters below it. Blocked by walls.")),i.set(o.W,new r("W","Wall","Blocks all letter destruction effects. Can be destroyed normally.","#55B560")),i.set(o.I,new r("I","Invisible","Can only be destroyed by letter abilities.","#4FA4E4")),i.set(o.C,new r("C","Cross","Destroys one block in each cardinal direction.","#99041D")),i.set(o.X,new r("X","X Bomb","Destroys one block at each corner.","#99041D")),i.set(o.Y,new r("Y","Yttrium Bomb","We kinda just liked the pattern.","#99041D")),i.set(o.O,new r("O","O")),i.set(o.N,new r("N","N")),i.set(o.E,new r("E","E")),i.set(o.B,new r("B","B")),i.set(o.M,new r("M","M")),i.set(o.Z,new r("Z","Z")),i.set(o.A,new r("A","A")),i.set(o.K,new r("K","K")),i.set(o.S,new r("S","S")),i.set(o.P,new r("P","P")),i.set(o.T,new r("T","Twist","Rotate all letters clockwise","#07a32b")),i.set(o.G,new r("G","G"));class I{constructor(e,t,n){this.letter=e,this.x=t,this.y=n}}class c{constructor(e){this.seed=e,this.get=function(){return this.seed=(9301*this.seed+49297)%233280,this.seed/233280}}}const l=13,a=8;class f{constructor(e){this.firstLetterScored=!1,this.secondLetterScored=!1,this.thirdLetterScored=!1,this.lost=!1,this.entities=e||new Array}static fromString(e,t,n){const r=new f,i=new c(13);for(let t=0;t<l;++t)for(let I=0;I<a;++I){const c=I+a*t;if(e.length>=c&&"*"!==e.charAt(c)){let n=e.charAt(c);if(" "===n)continue;"0"===n&&(n="First"),"1"===n&&(n="Second"),"2"===n&&(n="Third");const i=o[n];r.addLetter(i,I,t)}else{const e=s(i.get(),I,t,n);r.addLetter(e,I,t)}}return r.level=t,r}static fromSeed(e,t){const n=new f,r=new c(e);for(let e=0;e<l;++e)for(let o=0;o<a;++o){const i=s(r.get(),o,e,t);n.addLetter(i,o,e)}const i=[Math.floor(50*r.get())];for(let e=0;e<=3;++e){let e=Math.floor(50*r.get());for(;i.indexOf(e)>=0;)e=Math.floor(50*r.get());i.push(e)}return n.entities[i[0]].letter=o.First,n.entities[i[1]].letter=o.Second,n.entities[i[2]].letter=o.Third,n.level=e,n}addLetter(e,t,n){this.entities.push(new I(e,t,n))}removeLetterEntity(e){const t=this.entities.indexOf(e);this.entities.splice(t,1)}getLetterEntity(e,t){return this.entities.find(n=>n.x===e&&n.y===t)}clone(){const e=this.entities.map(e=>new I(e.letter,e.x,e.y)),t=new f(e);return t.firstLetterScored=this.firstLetterScored,t.secondLetterScored=this.secondLetterScored,t.thirdLetterScored=this.thirdLetterScored,t}}var d,u;!function(e){e[e.Destroy=0]="Destroy",e[e.Explode=1]="Explode",e[e.Fall=2]="Fall",e[e.Move=3]="Move",e[e.Transform=4]="Transform",e[e.BlockDestruction=5]="BlockDestruction",e[e.Score=6]="Score",e[e.ScoreDestroy=7]="ScoreDestroy"}(d||(d={})),function(e){e[e.Destroy=0]="Destroy",e[e.Prevent=1]="Prevent",e[e.Chain=2]="Chain"}(u||(u={}));const y=[o.C,o.X,o.Y];const h=new Set;function w(e,t){const n=[];return v(e,t,n),h.clear(),n}function p(e,t,n){const r=[];for(let i of t){const t=e.getLetterEntity(i.x,i.y);if(t){const e=`${t.x}_${t.y}`;if(!h.has(e)&&(h.add(e),r.push(t),n&&t.letter===o.W))break}}return r}function x(e,t,n=[]){for(let i of t){const t=(r=i).letter===o.W?u.Prevent:y.indexOf(r.letter)>-1?u.Chain:u.Destroy;t===u.Prevent?n.push({entity:i,effect:d.BlockDestruction}):t===u.Destroy?n.push({entity:i,effect:d.Destroy}):t===u.Chain&&(n.push({entity:i,effect:d.Explode}),v(e,i,n),n.push({entity:i,effect:d.Destroy}))}var r;return n}function v(e,t,n){if(t)switch(t.letter){case o.L:return function(t,n){let o=[];for(let e=t.x;e>=0;--e)o.push({x:e,y:t.y});const r=p(e,o,!0);return x(e,r,n),n}(t,n);case o.R:return function(t,n){let o=[];for(let e=t.x;e<a;++e)o.push({x:e,y:t.y});const r=p(e,o,!0);return x(e,r,n),n}(t,n);case o.U:return function(t,n){let o=[];for(let e=t.y;e>=0;--e)o.push({x:t.x,y:e});const r=p(e,o,!0);return x(e,r,n),n}(t,n);case o.D:return function(t,n){let o=[];for(let e=t.y;e<l;++e)o.push({x:t.x,y:e});const r=p(e,o,!1);return x(e,r,n),n}(t,n);case o.I:return function(e,t){return t.push({entity:e,effect:d.BlockDestruction}),t}(t,n);case o.First:case o.Second:case o.Third:return[];case o.C:return function(t,n){const o=[{x:t.x,y:t.y},{x:t.x,y:t.y-1},{x:t.x+1,y:t.y},{x:t.x,y:t.y+1},{x:t.x-1,y:t.y}],r=p(e,o,!1);return x(e,r,n),n}(t,n);case o.T:const i=function(t){let n=new Array,o=t.x,i=t.y;for(let e=-1;e<=1;++e)for(let t=-1;t<=1;++t){let r=o+e,s=i+t;0===e&&0===t||(0===e||0===t?(0===e&&(r-=t),0===t&&(s+=e)):e+t===0?s+=e:r-=t,n.push({x:o+e,y:i+t,toX:r,toY:s}))}n=n.filter(e=>!S(e));const s=[];for(const t of n){const n=e.getLetterEntity(t.x,t.y);n&&s.push(r(n,t.toX,t.toY))}return s}(t),s={entity:t,effect:d.Transform,changeTo:o.I};return n.push(...i.concat(s)),n;case o.Y:return function(t,n){const o=[{x:t.x,y:t.y},{x:t.x-1,y:t.y-1},{x:t.x+1,y:t.y-1},{x:t.x,y:t.y+1}],r=p(e,o,!1);return x(e,r,n),n}(t,n);case o.X:return function(t,n){const o=[{x:t.x,y:t.y},{x:t.x-1,y:t.y-1},{x:t.x+1,y:t.y-1},{x:t.x-1,y:t.y+1},{x:t.x+1,y:t.y+1}],r=p(e,o,!1);return x(e,r,n),n}(t,n);default:return function(e,t){return t.push({entity:e,effect:d.Destroy}),t}(t,n)}function r(e,t,n){return{entity:e,effect:d.Move,toX:t,toY:n}}}function S(e){return e.x<0||e.x>=a||e.y<0||e.y>=l}let g=new Array;function m(e,t,n,o,r){const i=e[t];return new Promise((s,I)=>{g.push({object:e,property:t,startingValue:i,targetValue:n,duration:o,tween:r,progress:0,stop:!1,onDone:()=>{s()}})})}function L(e){return new Promise((t,n)=>{setTimeout(()=>{t()},1e3*e)})}const W=function(e){return e},T=function(e){return e*e*e},X=function(e){return--e*e*e+1},b=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375};var F=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function I(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(s,I)}c((o=o.apply(e,t||[])).next())}))};let D=.5,C=!1;const k="assets/block.wav",P="assets/PerituneMaterial_Ramble_small.mp3";sounds.load(["assets/explosion.wav","assets/bounce.wav",P,k]);const R=new Promise((e,t)=>{sounds.whenLoaded=()=>{e()}});function M(){soundEffect(1046.5,0,.3,"sawtooth",D,-.8,0,1200,!1,0,25,[.2,.2,2e3],void 0)}function E(){sounds[k].volume=D,sounds[k].play()}function Y(){soundEffect(587.33,0,.2,"square",D,0,0),soundEffect(880,0,.2,"square",D,0,.1),soundEffect(1174.66,0,.3,"square",D,0,.2)}var U=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function I(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(s,I)}c((o=o.apply(e,t||[])).next())}))};let A,B={onLetterClick:null};const O=new PIXI.Text("0"),G=new PIXI.Text("1"),q=new PIXI.Text("2"),N="vt323regular";function _(e,t){return U(this,void 0,void 0,(function*(){if(A)for(const e of A.values())t.removeChild(e),e.destroy();A=new Map;const n=new Array;!function(e){const t=new PIXI.Graphics;t.lineStyle(3,16776960),t.moveTo(-22.5,0),t.lineTo(45*a,0),t.x=0,t.y=45*l,e.addChild(t);const n=45*l+15,o=me+1,r=Math.floor(o/100)%10,i=Math.floor(o/10)%10,s=o%10;O.text=r.toString(),G.text=i.toString(),q.text=s.toString(),O.x=45*a/2-32-64,O.y=n,G.x=45*a/2-32,G.y=n,q.x=45*a/2-32+64,q.y=n,O.style=new PIXI.TextStyle({fontFamily:N,fontSize:64,fill:"#000000",stroke:"#ffffff",strokeThickness:5,dropShadow:!0,wordWrap:!0,wordWrapWidth:440}),G.style=new PIXI.TextStyle({fontFamily:N,fontSize:64,fill:"#000000",stroke:"#ffffff",strokeThickness:5,dropShadow:!0,wordWrap:!0,wordWrapWidth:440}),q.style=new PIXI.TextStyle({fontFamily:N,fontSize:64,fill:"#000000",stroke:"#ffffff",strokeThickness:5,dropShadow:!0,wordWrap:!0,wordWrapWidth:440}),e.addChild(O),e.addChild(G),e.addChild(q)}(t),function(e,t,n){for(const o of e.entities){const e=Z(o,t);e.y-=45*l;const r=1.2+o.x/a*.2;n.push(m(e,"y",45*o.y,r,b)),A.set(o,e)}}(e,t,n),function(e){H.style=new PIXI.TextStyle({fontFamily:N,fontSize:24,fill:"#ffffff",stroke:"#4a1850",strokeThickness:5,dropShadow:!0,wordWrap:!0,wordWrapWidth:200}),H.x=400,H.y=100,e.addChild(H)}(t),function(e){V.style=new PIXI.TextStyle({fontFamily:N,fontSize:24,fill:"#ffffff",stroke:"#4a1850",strokeThickness:5,dropShadow:!0,wordWrap:!0,wordWrapWidth:200}),V.anchor.set(.5,.5),V.x=45*a/2,V.y=-20,e.addChild(V)}(t),K(""),yield Promise.all(n)}))}function j(e,t,n){return U(this,void 0,void 0,(function*(){const o=new Array;let r=!1,i=!1;for(const s of n){const n=A.get(s.entity);if(n)switch(s.effect){case d.ScoreDestroy:z(t),Y();case d.Destroy:i=!0,n.alpha=0,sounds["assets/explosion.wav"].volume=D,sounds["assets/explosion.wav"].play(),yield ee(e,s,100),e.removeChild(n);break;case d.BlockDestruction:case d.Explode:yield J(n);break;case d.Fall:r=!0;const I=m(n,"y",45*s.toY,.4,b);o.push(I);break;case d.Move:const c=m(n,"y",45*s.toY,.4,T),l=m(n,"x",45*s.toX,.4,T);o.push(l,c);break;case d.Transform:yield J(n),$(n,s.changeTo);break;case d.Score:}}r&&function(e=0){const t=sounds["assets/bounce.wav"];t.volume=D,t.setEcho(.1,.1,500),e>0?setTimeout(()=>{t.play()},1e3*e):t.play()}(.2),yield Promise.all(o),i&&(yield L(.4))}))}function z(e){e.firstLetterScored&&(O.style.fill="#FFFF00",O.style.stroke="#4a1850"),e.secondLetterScored&&(G.style.fill="#FFFF00",G.style.stroke="#4a1850"),e.thirdLetterScored&&(q.style.fill="#FFFF00",q.style.stroke="#4a1850")}const H=new PIXI.Text("* Press a letter\n* Score ONE point \n* Don't destroy ONE ");const V=new PIXI.Text("");function K(e){V.text=e}function Z(e,t){const n=45*e.x,o=45*e.y,r=new PIXI.Text,s=new PIXI.TextStyle({fontFamily:N,fontSize:52,stroke:"#4a1850",strokeThickness:5,dropShadow:!0});return r.style=s,$(r,e.letter),r.x=n,r.y=o,r.interactive=!0,r.buttonMode=!0,r.on("pointerover",()=>{r.style.fill="#FF0000"}).on("pointerout",()=>{const t=i.get(e.letter);t&&(r.style.fill=t.color||"#FFFFFF")}).on("pointerdown",()=>{B.onLetterClick&&B.onLetterClick(e);const t=i.get(e.letter);t&&K(`${t.name}`)}),t.addChild(r),r}function $(e,t){0===e.alpha&&(e.alpha=1);const n=i.get(t);n&&(e.style.fill=n.color,n.char!==e.text&&(t===o.First?e.text=O.text:t===o.Second?e.text=G.text:t===o.Third?e.text=q.text:e.text=n.char))}function J(e){return U(this,void 0,void 0,(function*(){E(),e.pivot.set(.5,.5),m(e.scale,"x",1.4,.1,W),yield m(e.scale,"y",1.4,.1,W),m(e.scale,"x",1,.2,X),yield m(e.scale,"y",1,.2,X),e.pivot.set(0,0)}))}let Q=null;function ee(e,t,n){return U(this,void 0,void 0,(function*(){return new Promise((o,r)=>{let i;Q?(i=Q,Q=null):i=new PIXI.Graphics,e.addChild(i),i.x=45*t.entity.x+45/4,i.y=45*t.entity.y+45/4;const s=n;let I,c=0;const l=t=>{let n;n=I?t-I:0,I=t,c+=n;const r=.01+14.99*(c/s);i.clear(),i.beginFill(14833698),i.drawCircle(0,0,r),i.endFill(),c<s?requestAnimationFrame(l):(e.removeChild(i),Q?i.destroy():Q=i,L(.01).then(()=>o()))};requestAnimationFrame(l)})}))}class te{constructor(e,t,n=1){this.x=e,this.y=t,this.distance=n}}function ne(e){return e.firstLetterScored&&e.secondLetterScored&&e.thirdLetterScored}function oe(e,t){let n=new Array,r=new Array;const i=new Array,s=new Array;for(let c=0;c<t.length;++c){const a=t[c];switch(a.effect){case d.Destroy:const t=a.entity.letter;t!==o.First&&t!==o.Second&&t!==o.Third||(e.lost=!0);case d.ScoreDestroy:r.push(new te(a.entity.x,a.entity.y)),I=a.entity,e.removeLetterEntity(I);break;case d.Fall:n=n.concat(f(a.entity,a.toY));break;case d.Move:s.push({entity:a.entity,x:a.toX,y:a.toY}),i.push(new te(a.entity.x,a.entity.y));let c=a.toY;const y=l;for(let e=c;e<=y;++e)i.push(new te(a.toX,e));break;case d.Transform:a.entity.letter=a.changeTo;break;case d.Score:n=n.concat(u(e,a.entity))}}var I;const c=new Array;s.forEach(e=>function(e,t=[]){const n=e.entity;n.x=e.x,n.y=e.y,S(n)&&t.push({effect:d.Destroy,entity:n});return t}(e,c)),r=r.concat(i.filter(t=>!e.getLetterEntity(t.x,t.y)));const a=function(e,t){let n=new Array,o=t.sort((e,t)=>e.y-t.y);for(;o.length>0;){const r=t.pop();if(0===r.y)continue;if(S(r))continue;const i=e.getLetterEntity(r.x,r.y-1);if(i){n.push({effect:d.Fall,entity:i,toX:r.x,toY:i.y+r.distance});const e=o.findIndex(e=>e.y===e.y-1);o.splice(e,0,new te(r.x,r.y-1,r.distance));continue}const s=o.find(e=>e.x===r.x&&e.y===r.y-1);s&&(s.distance+=r.distance)}return n}(e,r);return n=n.concat(a).concat(c),n;function f(e,t){return e.y=t,(n=e).letter!==o.First&&n.letter!==o.Second&&n.letter!==o.Third||n.y!==l-1?[]:[{entity:e,effect:d.Score}];var n}function u(e,t){return e.firstLetterScored=e.firstLetterScored||t.letter===o.First,e.secondLetterScored=e.secondLetterScored||t.letter===o.Second,e.thirdLetterScored=e.thirdLetterScored||t.letter===o.Third,[{entity:t,effect:d.ScoreDestroy}]}}const re={DefaultLetterFrequency:new Map([[o.L,10],[o.R,10],[o.U,10],[o.D,5],[o.W,12],[o.I,14],[o.C,10],[o.Y,10],[o.X,9],[o.T,10]]),InvisibleHeavy:new Map([[o.L,10],[o.R,10],[o.U,8],[o.D,5],[o.W,6],[o.I,40],[o.C,5],[o.Y,4],[o.X,4],[o.T,8]]),BombHeavy:new Map([[o.L,9],[o.R,9],[o.U,4],[o.D,4],[o.W,12],[o.I,5],[o.C,15],[o.Y,15],[o.X,15],[o.T,12]]),TwistHeavy:new Map([[o.L,5],[o.R,5],[o.U,5],[o.D,5],[o.W,10],[o.I,9],[o.C,8],[o.Y,8],[o.X,5],[o.T,40]])};function ie(e){const t=Math.ceil(e.length/a);return" ".repeat(a*(l-t))+e}function se(e,t){if(t)return f.fromSeed(e,t);const n=function(e){const t=[ie("  012   IIIIIIIL"),ie("  012   IIWIIIILRIIIIIII"),ie("I0IIIII1IDIIIIIDIII2IIIIRIIIIIII"),ie("I0IIIII1IDIIIIIDIIIIIII2IRIIIIII"),ie("II01IIIIWWWWWWWWIII2IIIWIIIDIUILWIUIIIIL"),ie("0IIIIIIIRIW1IIIWDIIDI2IIIIIIIIIIWRUIIUIU"),ie("IIII0IIIIII1I2IIIIIICIIIIRIIIIII"),ie("IIIIIIII0IILIIIIRII1IIIWIIIDILIIUIIC2IIIWIUIICII"),ie("0IIIIIIIWW1IIIIIIIYIIIIIIICII2IIIICIIYIIUIIIIIII"),ie("IIIIIIIIIIIIIII0IIIIIICIIIIIIIIYR1IIIRCIIYID2IICRIUIICWW"),ie("IIII0IIICCCWWWCCIXIXDXIIIIXIX1XIIIIXIXIIIIXIXWXIIX2XIXIIIIXIXIIL"),ie("III2IIIIIXIICIRIYIIICUIIWWWWWWWWLIII1IILIIIIICILWWWWWWWWIII0IIIURIIXIIIL"),ie("II2IWYCIIIRIIYIIIIIYIRIII1CIILIIIXIRIWWIIILII0IIIWIRIILIIILIIIRIIIXIIYIIIIILIIWW"),ie("IIIIIIIIIII21IIIIR0TLIIIIIUIIIII"),ie("XDIIUIIYWTWILIRII1CTCILICUIYILIIIRTIYIY2WILXWIWIWIII0RIIILTIWTCIIRIXUILIXILTIXIWIIRIILIURIITIIUI")];return e>=t.length?null:t[e]}(e);if(n)return f.fromString(n,e,re.DefaultLetterFrequency);{const t=Math.floor(e/10),n=e-10*t;if(t>levelSequences.length)return Ie();const o=levelSequences[t];if(n>o.levels.length)return Ie();const r=o.levels[n],i=re[o.frequencies];return f.fromSeed(r,i)}}function Ie(){return f.fromString(" ".repeat(a*Math.floor(l/2))+" THE END"+" ".repeat(a*Math.floor(l/2)),0,re.DefaultLetterFrequency)}new c(377827);var ce=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function I(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(s,I)}c((o=o.apply(e,t||[])).next())}))};PIXI.settings.SPRITE_MAX_TEXTURES=Math.min(PIXI.settings.SPRITE_MAX_TEXTURES,16);const le=new PIXI.Application;console.log(`window.devicePixelRatio: ${window.devicePixelRatio}`);const ae=new PIXI.Container;let fe,de,ue,ye,he,we,pe,xe,ve,Se;function ge(e=!1){e&&le.renderer.resize(window.innerWidth,window.innerHeight);const t=45*a,n=45*l;ae.x=le.screen.width/2-t/2,ae.y=le.screen.height/2-n/2;fe&&(fe.x=ae.x+400,fe.y=ae.y+300),pe&&(pe.x=ae.x,pe.y=ae.y+608),xe&&(xe.x=ae.x+320,xe.y=ae.y+608),ve&&(ve.x=ae.x+50,ve.y=ae.y+608),Se&&(Se.x=ae.x+260,Se.y=ae.y+608);const o=1.15*t,r=n+15+200,i=le.screen.width/o,s=le.screen.height/r,I=Math.min(s,i);if(I<1){const e=(1-I)/2;le.stage.x=le.screen.width*e,le.stage.y=le.screen.height*e,le.stage.scale.set(I)}}le.stage.addChild(ae),le.renderer.view.style.position="absolute",le.renderer.view.style.display="block",le.renderer.autoDensity=!0,le.renderer.resize(window.innerWidth,window.innerHeight),window.onresize=()=>{ge(!0)},document.body.appendChild(le.view),new FontFaceObserver(N).load(null,5e3).then((function(){console.log("Font is available"),de=PIXI.Texture.from("assets/volume-mute-solid.svg"),ue=PIXI.Texture.from("assets/volume-up-solid.svg"),ye=PIXI.Texture.from("assets/undo-alt-solid.svg"),we=PIXI.Texture.from("assets/caret-right-solid.svg"),he=PIXI.Texture.from("assets/caret-left-solid.svg"),pe=new PIXI.Sprite(ue),xe=new PIXI.Sprite(ye),Se=new PIXI.Sprite(we),ve=new PIXI.Sprite(he),le.stage.addChild(pe),le.stage.addChild(xe),le.stage.addChild(ve),le.stage.addChild(Se),function(){ce(this,void 0,void 0,(function*(){let e=!1,t=!1;pe.interactive=!0,pe.on("pointerdown",()=>ce(this,void 0,void 0,(function*(){pe.texture=(C=!C,D=C?0:.5,C?de:ue)}))),xe.interactive=!0,xe.on("pointerdown",()=>ce(this,void 0,void 0,(function*(){t=!1,M();const o=yield r(se(me));n=o,e=!1}))),ve.interactive=!0,ve.on("pointerdown",()=>ce(this,void 0,void 0,(function*(){t=!1,M(),me-=1,window.localStorage.setItem("level",""+me),ve.visible=me>0,Se.visible=me<Le;const o=yield r(se(me));n=o,e=!1}))),Se.interactive=!0,Se.on("pointerdown",()=>ce(this,void 0,void 0,(function*(){t=!1,M(),We();const o=yield r(se(me));n=o,e=!1}))),ge(),le.ticker.add(()=>{!function(e){for(const t of g)if(t.progress+=e/t.duration,t.progress>1)t.object[t.property]=t.targetValue,t.stop=!0,t.onDone();else{const e=t.startingValue+(t.targetValue-t.startingValue)*t.tween(t.progress);t.object[t.property]=e}g=g.filter(e=>!e.stop)}(le.ticker.elapsedMS/1e3)}),function(){const e=new URLSearchParams(new URL(document.URL).search).get("level"),t=e&&parseInt(e)?parseInt(e):null;me=t||Number(window.localStorage.getItem("level"))||0,Le=Number(window.localStorage.getItem("maxLevel"))||0,ve.visible=me>0,Se.visible=me<Le}();let n=se(me);function o(e){return ce(this,void 0,void 0,(function*(){let o=w(n,e);for(;0!==o.length;)yield j(ae,n,o),o=oe(n,o);ne(n)?(We(),function(e){ce(this,void 0,void 0,(function*(){window.localStorage.setItem("currentlevel",""+e),t=!0,n=yield r(f.fromString(" ".repeat(a*Math.floor(l/2))+" WINNER "+" ".repeat(a*Math.floor(l/2)),0,re.DefaultLetterFrequency)),Y(),yield L(.7),Y(),yield L(.7);const o=n.entities.map(e=>void 0!==e.letter?{entity:e,effect:d.Destroy}:null).filter(e=>null!==e);1===e&&function(){F(this,void 0,void 0,(function*(){yield R;const e=sounds[P];e.playing||(console.log("beginning song playback"),e.volume=0,e.playbackRate=.8,e.loop=!0,e.play(),e.fadeIn(5,.2))}))}(),t&&(t&&(yield j(ae,n,o)),n=yield r(se(me)),t=!1)}))}(me)):function(e){return e.lost}(n)&&function(){ce(this,void 0,void 0,(function*(){t=!0,n=yield r(f.fromString(" ".repeat(a*Math.floor(l/2))+"TRYAGAIN"+" ".repeat(a*Math.floor(l/2)),0,re.DefaultLetterFrequency)),E(),yield L(.1),E(),yield L(.2),E(),yield L(.7);const e=n.entities.map(e=>void 0!==e.letter?{entity:e,effect:d.Destroy}:null).filter(e=>null!==e);t&&(yield j(ae,n,e)),t&&(n=yield r(se(me)),t=!1)}))}()}))}function r(e){return ce(this,void 0,void 0,(function*(){return g.forEach(e=>e.onDone()),g=[],function(e){e.firstLetterScored=!1,e.secondLetterScored=!1,e.thirdLetterScored=!1}(n),yield _(e,ae),e}))}n=yield r(se(me)),0===me&&function(e,t,n){U(this,void 0,void 0,(function*(){const o=e.getLetterEntity(t,n);if(!o)return;let r;for(r=A.get(o);r;){try{yield i(r)}catch(e){console.log("First letter destroyed during pulse (this is fine)")}yield L(1),r=A.get(o)}function i(e){return U(this,void 0,void 0,(function*(){const t=new PIXI.Text,n=new PIXI.TextStyle({fontFamily:N,fontSize:52,stroke:"#fa1850",strokeThickness:5,dropShadow:!0});t.style=n,t.text="<",t.y=-20,t.x=-5,t.anchor.set(0,0),t.rotation=-1.5708,e.addChild(t),yield J(t)}))}}))}(n,7,12),B.onLetterClick=t=>{e||(e=!0,o(t).then(()=>e=!1))}}))}()}),(function(){console.log("Font is not available after waiting 5 seconds")}));let me=0,Le=0;function We(){me+=1,window.localStorage.setItem("level",""+me),ve.visible=me>0,Se.visible=me<Le,me>Le&&(Le=me,window.localStorage.setItem("maxLevel",""+Le))}}]);